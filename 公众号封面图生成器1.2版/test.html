<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>扩展功能测试页面</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .editor-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background: #f9f9f9;
        }
        .title-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            margin-bottom: 15px;
        }
        .content-area {
            width: 100%;
            min-height: 200px;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            resize: vertical;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px dashed #4f46e5;
            border-radius: 8px;
        }
        .test-title {
            color: #4f46e5;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .instruction {
            background: #e0f2fe;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>🎨 公众号封面图生成器 - 测试页面</h1>
    
    <div class="instruction">
        <strong>使用说明：</strong>
        <ol>
            <li>确保已安装并配置好扩展</li>
            <li>在下方输入框中输入文章标题</li>
            <li>点击浏览器工具栏中的扩展图标</li>
            <li>在侧边栏中测试标题识别和封面生成功能</li>
        </ol>
    </div>

    <!-- 模拟微信公众平台编辑器 -->
    <div class="test-section">
        <div class="test-title">📝 模拟微信公众平台编辑器</div>
        <div class="editor-container">
            <input type="text" id="title" class="title-input" placeholder="请输入标题" value="如何利用AI技术提升工作效率：从入门到精通的完整指南">
            <textarea class="content-area" placeholder="请输入正文内容...">在这个快速发展的数字时代，人工智能技术正在改变我们的工作方式。本文将为您详细介绍如何在日常工作中有效利用AI工具，提升工作效率和质量。

从基础的AI写作助手到高级的数据分析工具，我们将一步步带您了解这些强大的技术如何为您的职业生涯带来革命性的改变。</textarea>
        </div>
    </div>

    <!-- 模拟秀米编辑器 -->
    <div class="test-section">
        <div class="test-title">🎯 模拟秀米编辑器</div>
        <div class="editor-container">
            <input type="text" class="title-input" placeholder="标题" value="2024年最值得关注的5个科技趋势">
            <textarea class="content-area" placeholder="编辑内容...">科技发展日新月异，2024年将是充满变革的一年。从生成式AI的普及应用到量子计算的突破性进展，这些技术趋势将深刻影响我们的生活和工作。</textarea>
        </div>
    </div>

    <!-- 模拟135编辑器 -->
    <div class="test-section">
        <div class="test-title">✨ 模拟135编辑器</div>
        <div class="editor-container">
            <input type="text" name="title" class="title-input" placeholder="请输入文章标题" value="小白也能学会的Python编程：30天从零基础到实战">
            <textarea class="content-area" placeholder="请输入文章内容...">Python作为最受欢迎的编程语言之一，以其简洁易学的特点吸引了无数初学者。本课程专为零基础学员设计，通过30天的系统学习，让您从编程小白成长为能够独立完成项目的开发者。</textarea>
        </div>
    </div>

    <!-- 通用测试区域 -->
    <div class="test-section">
        <div class="test-title">🔧 通用标题测试</div>
        <div class="editor-container">
            <input type="text" placeholder="标题" value="深度解析：ChatGPT背后的技术原理与应用前景">
            <div contenteditable="true" style="border: 1px solid #ccc; padding: 10px; min-height: 100px; border-radius: 4px;">
                <h1 contenteditable="true">区块链技术在金融领域的创新应用与挑战</h1>
                <p>可编辑的标题测试区域...</p>
            </div>
        </div>
    </div>

    <div class="warning">
        <strong>⚠️ 注意：</strong>
        <ul>
            <li>这是一个测试页面，用于验证扩展的标题识别功能</li>
            <li>实际使用时请在真实的编辑器页面中操作</li>
            <li>如果标题识别失败，可以手动复制标题到扩展中</li>
        </ul>
    </div>

    <div class="instruction">
        <strong>🚀 测试步骤：</strong>
        <ol>
            <li><strong>安装扩展：</strong>按照INSTALL.md的说明安装扩展</li>
            <li><strong>配置API：</strong>在扩展中配置Coze API密钥和工作流ID</li>
            <li><strong>测试识别：</strong>点击扩展图标，尝试识别页面中的标题</li>
            <li><strong>生成封面：</strong>使用识别到的标题生成封面图</li>
            <li><strong>下载图片：</strong>预览并下载生成的封面图</li>
        </ol>
    </div>

    <footer style="margin-top: 50px; text-align: center; color: #666; border-top: 1px solid #eee; padding-top: 20px;">
        <p>© 2024 公众号封面图生成器 - 测试页面</p>
        <p>如有问题，请查看README.md或INSTALL.md文档</p>
    </footer>

    <script>
        // 简单的交互功能
        document.addEventListener('DOMContentLoaded', function() {
            console.log('测试页面已加载');
            console.log('当前页面包含以下可能的标题元素:');
            
            // 查找所有可能的标题元素
            const titleSelectors = [
                '#title',
                'input[placeholder*="标题"]',
                'input[name="title"]',
                'h1[contenteditable]',
                '.title-input'
            ];
            
            titleSelectors.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                if (elements.length > 0) {
                    console.log(`找到 ${elements.length} 个匹配 "${selector}" 的元素`);
                    elements.forEach((el, index) => {
                        const text = el.value || el.textContent || el.innerText;
                        if (text && text.trim()) {
                            console.log(`  [${index}] ${text.trim()}`);
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>